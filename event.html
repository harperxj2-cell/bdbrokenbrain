<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Event Entry</title>
  <style>
    body {
      margin: 0; padding: 20px;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: #050008; color: #ffd27f;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      text-shadow: 0 0 10px #ff00ff;
    }
    label { display: block; margin-top: 12px; font-weight: bold; }
    textarea, input[type="date"] {
      width: 100%;
      max-width: 100%;
      background: #12001a;
      color: #ffe0a6;
      border: 1px solid #ff00ff;
      padding: 8px;
      font-family: inherit;
    }
    textarea {
      min-height: 80px;
    }
    .section-title {
      margin-top: 20px;
      font-size: 1.1rem;
      text-decoration: underline;
      text-underline-offset: 4px;
    }
    .buttons {
      margin-top: 20px;
      display: flex;
      gap: 10px;
    }
    button {
      padding: 8px 16px;
      border: none;
      cursor: pointer;
      background: #ff00ff;
      color: #fff;
      font-weight: bold;
      border-radius: 4px;
      flex: 1;
    }
    button.secondary { background: #444; }
    .saved-message {
      margin-top: 10px;
      color: #8cff8c;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <h1>Event Entry</h1>

  <!-- Date up top -->
  <div class="section-title">Date</div>
  <label for="eventDate">Date</label>
  <input type="date" id="eventDate">

  <!-- What Happened & Resolution -->
  <div class="section-title">What Happened & Resolution</div>
  <label for="eventDescription">Describe the event and how it was resolved (if applicable)</label>
  <textarea id="eventDescription" placeholder="What happened? What was the resolution?"></textarea>

  <!-- Situation Prompt -->
  <div class="section-title">Situation Prompt</div>
  <label for="situationPrompt">Describe a situation that occurred (or prompt you responded to)</label>
  <textarea id="situationPrompt" placeholder="Describe the situation or prompt..."></textarea>

  <!-- Symptoms & Behaviors -->
  <div class="section-title">Symptoms & Behaviors</div>
  <label for="symptoms">Mental (anxiety/irritability), Physical (headache/tension), Behavioral (withdrawal/fidgeting)</label>
  <textarea id="symptoms" placeholder="Describe symptoms, behaviors, and changes..."></textarea>

  <!-- Triggers & Stressors -->
  <div class="section-title">Triggers & Stressors</div>
  <label for="triggers">Events/thoughts before mood shift; External (work/social); Internal (negative thoughts/illness)</label>
  <textarea id="triggers" placeholder="Note triggers, situations, external/internal factors..."></textarea>

  <div class="buttons">
    <button type="button" onclick="saveEvent()">Save</button>
    <button type="button" class="secondary" onclick="goBack()">Back to Dashboard</button>
  </div>

  <div id="savedMsg" class="saved-message"></div>

  <script>
    // Set current date
    document.getElementById('eventDate').valueAsDate = new Date();

    function saveEvent() {
      const eventDate = document.getElementById('eventDate').value;
      const eventDescription = document.getElementById('eventDescription').value.trim();
      const situationPrompt = document.getElementById('situationPrompt').value.trim();
      const symptoms = document.getElementById('symptoms').value.trim();
      const triggers = document.getElementById('triggers').value.trim();

      if (!eventDescription && !situationPrompt && !symptoms && !triggers) {
        alert('Fill out at least one section before saving.');
        return;
      }

      let events = JSON.parse(localStorage.getItem('events') || '[]');
      events.push({
        type: 'event',
        date: eventDate,
        description: eventDescription,
        situationPrompt,
        symptoms,
        triggers
      });
      localStorage.setItem('events', JSON.stringify(events));

      document.getElementById('savedMsg').textContent = 'Saved!';
      // Clear fields
      document.getElementById('eventDescription').value = '';
      document.getElementById('situationPrompt').value = '';
      document.getElementById('symptoms').value = '';
      document.getElementById('triggers').value = '';
    }

    function goBack() {
      window.location.href = 'index.html';
    }
  </script>
</body>
</html>
